### <center>탈출<center>

|                         Constraints                          |      Time Complexity      |
| :----------------------------------------------------------: | :-----------------------: |
| $1\le P \le V \le 100$, $V-1\le E\le 100$, $0\le a_{i},b_{i}\le 1000$ | $O(V^{2}Elg(\sum a_{i}))$ |

#### 풀이

---

풀이 : $Network$ $Flow + Parametric$ $Search$

정해의 경우 $Network$ $Flow$를 $Dinic$ 으로 구현하였습니다.

각 마을로 들어오는 정점과 나가는 정점 두 개로 분할해서 보고 두 정점 사이의 $capability$를 식량 + $K$로 보면 그 마을을 거쳐 이동할 수 있는 사람을 표현할 수 있습니다. 이후 $source$에서 마을로 들어오는 정점을 표현하는 간선의 $capability$를 사람수로 설정하고, 다른 간선의 $capability$를 무한대로 초기화하여 $Flow$알고리즘을 실행시켰을 때 사람수의 총합을 반환하는 최소의 $K$가 정답이 됩니다.

$Parametric$ $Search$의 범위를 $K$로 두고 정답을 찾으면 됩니다.



#### 구현

------

$G$에 도전하시는 분이라면 플로우를 아실 가능성이 높지만, 풀이가 공개된 이후에 누구나 도전할 수 있도록 구현( ~~복붙~~ )하는 방법도 기술하겠습니다 :) 



$Dinic$의 경우 인터넷에 많은 코드가 돌아다니며, 형태가 복붙하기 쉬우므로, 플로우 알고리즘을 공부하신 적이 없더라도 찾아서 구현할 수 있을 것입니다. $Dinic$을 외워서 짜는 사람은 있어도, 증명을 알고 있는 사람은 드물기도 하니 편한 마음으로 복붙합시다. 제가 짜둔 $Dinic$ 복붙용 플로우 기본 문제 링크입니다.

http://boj.kr/775859913f0f43f1b1de7deaae1d8210

#include<bits/stdc++.h>부터 int dinic() 함수까지 코드에 복붙하시면 됩니다. 여러분은 이 중에서 add_edge함수와 dinic함수만 사용하시게 될 것입니다.

코드의 사용법을 설명하겠습니다. $G$와 $darr$과 $iter$의 크기를 플로우에서 사용할 정점 개수만큼 늘려줍니다. add_edge로 그래프를 표현하고, $dinic(source, sink)$함수를 실행시키면 최대 유량을 반환합니다.



플로우 모델링을 할 때는, 플로우에서 사용할 정점이 가지는 의미를 정해둬야 하는데요. 편하신 대로 $index$를 매겨주시면 됩니다. 저의 경우 $0$번 $index$을 $source$로 $1$번 $index$를 $sink$로, $1+i$번 $index$를 $i$번째 마을로 들어오는 정점으로, $100+i$ 번 $index$를 $i$번째 마을에서 나가는 정점으로 사용했습니다.



적당히 반복문을 돌면서, 아래의 다섯 종류의 간선을 추가해서 플로우 그래프를 모델링합니다.

$add\_ edge( source , 1+i, 사람수 );$ 

$add\_ edge( 1+i , 100+i, 식량 );$ 

$add\_edge(100+i, 1+j, INF);$ // i와 j는 연결된 마을을 의미합니다.

$add\_edge(1+i, 100+j, INF);$  // 양방향 그래프이기 때문에 반대로도 해주는 것입니다.

$add\_edge(100+i, sink, INF);$



추가적으로 이 문제의 경우 $Parametric$ $Search$를 위해 $dinic$을 여러번 실행시켜야 하므로, $struct$ $edge$ 안에 $int$ $origin;$ 이라는 변수를 만들고, $add\_ edge$의 두 개의 중괄호 끝에 $,origin$을 추가해서 원본 $capablity$를 저장해둡니다. $cap$이라는 변수는 $dinic$함수가 실행되면 값이 변하기 때문입니다.



$Parametric$ $Search$를 돌 때마다 그래프에 있는 모든 간선의 $cap$을 $origin$으로 복구해주시고, $\{ 1+i , 100+i, 식량 \}$를 나타내는  간선의 $cap$에 $mid$값을 더해주시면 되겠습니다. $dinic$을 실행시켜서 흐른 최대 유량이 $\sum a_{i}$와 같으면 (즉, 모든 사람이 탈출할 수 있으면) $Parametric$ $Search$의 $r$을 감소시켜주면 되고, 그렇지 않다면 $l$을 증가시켜주면 되겠습니다.



추가적으로 $Parametric$ $Search$를 돌릴 때에는 $l$은 당연히 0으로 초기화하고, $r$은 사람의 최대 총합인 $10^5$으로 초기화해야 합니다.



글만 빽빽한 풀이를 읽느라 고생하셨습니다.

이제 $Parametric$ $Search$ 부분을 스스로 짜봅시다.